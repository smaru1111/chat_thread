# Threaded LLM Chat Application

## 🎯 プロジェクト概要

現在主流のチャット型LLMは、**「時系列（線形）」で会話履歴を処理**する前提で設計されています。  
しかし、人間同士の対話は本来もっと複雑で、  
**「話題が分岐し、過去に戻り、枝分かれしながら発展する構造（ツリー構造）」** を持っています。

そのため従来型チャットでは、以下の問題が起こりがちです：

- 文脈誤解・曖昧応答  
- 特定の話題に戻るのが困難  
- 情報が混線してユーザーが思考の枝を追えない  
- 過去の一部だけを選んで対話を再開できない  

---

## 🌟 このアプリで実現すること

本プロジェクトは、従来の「線形チャット」を超えた  
**スレッド（ツリー）型の会話構造をLLMで扱えるチャットアプリ** を実装します。

### 主要コンセプト

### 1. **会話をツリー構造で管理**
各メッセージが `parentMessageId` を持ち、  
**「どのメッセージから派生したか」** を明確に記録。

### 2. **任意のメッセージから対話を再開**
ユーザーは過去の好きな地点から分岐し、新しい思考ライン（スレッド）を開始できる。

### 3. **LLMにはスレッドの「先祖メッセージ」だけを送信**
選択された枝のコンテキストだけを安全に保持することで、
誤解のない応答を実現。

### 4. **人間の思考の自然構造をそのまま扱える「チャットを越えた対話体験」**
- 例：アイデア探索  
- 例：複数仮説の並列検討  
- 例：物語生成やコード分岐  
- 例：大量プロジェクトの文脈整理  

---

## 🗂 docs フォルダの役割

このプロジェクトは **「設計→実装→検証」** を明確に分離し、  
Cursor と相性よく開発できるように構造化しています。

以下は docs の構成と役割です。

### `docs/01_vision.md`
- プロジェクトの思想・背景・解決したい課題を記述
- なぜこのアプリを作るのか？
- どんな価値があるのか？  
- 未来の進化方向や思想の根幹を残す場所

### `docs/02_requirements.md`
- 機能要件・非機能要件  
- 「ユーザーが最終的に何をできるようになるか」を明示  
- 仕様変更時はこのファイルを更新して“単一の真実”を保つ

### `docs/03_models.md`
- 定義した要件を満たすために必要なDB構造の定義
- 特に本アプリの中核となる **「スレッド型会話モデル」** のDB構造の定義について分かりやすく説明 
- LLMへ渡すための「先祖メッセージ抽出ロジック」など

### `docs/04_resource.md`
- 各リソースの技術選定とその理由を記述

### `docs/05_api_design.md`
- backend ↔ frontend  
- backend ↔ LLM（OpenAI API等）  
の API 仕様を整理  
- 入出力フォーマット  
- エンドポイント一覧  
- 例リクエスト/レスポンス  
UI実装前の重要な設計資料

### `docs/06_ui_ux.md`
- 会話ツリーの表示方法  
- 「このメッセージから続ける」などのUX仕様  
- 画面レイアウト  
- ユーザー操作のシナリオ  
- プロトタイプの挙動指針

---

## 🚀 このリポジトリで目指すもの

> **「人間の思考構造と同じ形でLLMと会話できる未来」**  
> を一歩ずつ形にしていくための実験的プロジェクト。

線形チャットの制約を超え、  
「分岐・再帰・探索」が自然にできる **新しい会話体験** を作ります。

---

## 🤝 Contributing

- 追加アイデア  
- 設計の議論  
- UI改善案  
- 実装改善  
なんでも歓迎です。  

docs を起点に議論できるように、設計思想を常に最新に保っていきます。


